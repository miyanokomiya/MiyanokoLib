!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.MiyanokoLib=e():t.MiyanokoLib=e()}(this,function(){return function(t){function e(a){if(r[a])return r[a].exports;var i=r[a]={exports:{},id:a,loaded:!1};return t[a].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){var a;a=function(t){/*!
	     * MiyanokoLib
	     * v1.0.0 (c) 2016 miyanokomiya.tokyo
	     * license MIT
	     */
var e={canvasUtil:r(1),mathUtil:r(2),Sound:r(3),svgUtil:r(4)};return e}.call(e,r,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,r){var a;a=function(t){var e={getCursorPoint:function(t){var e=null,r=t.originalEvent||t;r.touches&&r.touches.length>0&&(r=r.touches[0]);var a=r.target.getBoundingClientRect(),i=a.left+window.pageXOffset,s=a.top+window.pageYOffset;return e={x:r.pageX-i,y:r.pageY-s}}};return e}.call(e,r,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,r){var a;a=function(){var t={MINVALUE:1e-6,isSame2D:function(t,e){return Math.abs(t.x-e.x)<this.MINVALUE&&Math.abs(t.y-e.y)<this.MINVALUE},length2D:function(t,e){e=e||{x:0,y:0};var r=t.x-e.x,a=t.y-e.y;return Math.sqrt(r*r+a*a)},vecAdd2D:function(t,e){return{x:t.x+e.x,y:t.y+e.y}},vecSub2D:function(t,e){return{x:t.x-e.x,y:t.y-e.y}},vecMult2D:function(t,e){return{x:t.x*e,y:t.y*e}},vecUnit2D:function(t){var e=this.length2D(t);if(Math.abs(e)<this.MINVALUE)throw new Error("Unit vector cannot be calced from zero vector.");return this.vecMult2D(t,1/e)},cross2D:function(t,e){return t.x*e.y-t.y*e.x},inner2D:function(t,e){return t.x*e.x+t.y*e.y},pointCopy2D:function(t){return t?{x:t.x,y:t.y}:null},pointArrayCopy2D:function(t){for(var e=[],r=0;r<t.length;r++)e.push(this.pointCopy2D(t[r]));return e},centralPoint2D:function(t,e){var r=this.vecAdd2D(t,e);return this.vecMult2D(r,.5)},radian2D:function(t,e){var r=t.x-e.x,a=t.y-e.y;return(Math.atan2(a,r)+2*Math.PI)%(2*Math.PI)},symmetryPoint2D:function(t,e){var r=this.vecSub2D(e,t),a=this.pointCopy2D(t);return a.x+=r.x,a.y+=r.y,a},rotate2D:function(t,e,r){r=r||{x:0,y:0},t=this.vecSub2D(t,r);var a=(this.length2D(t),{});return a.x=Math.cos(e)*t.x-Math.sin(e)*t.y,a.y=Math.sin(e)*t.x+Math.cos(e)*t.y,a=this.vecAdd2D(a,r)},solveEquationOrder2:function(t,e,r){if(0===t)return 0===e?[]:[-r/e];var a=e*e-4*t*r;if(0>a)return[];var i=.5/t;if(0===a)return[-e*i];var s=Math.sqrt(a);return[(-e+s)*i,(-e-s)*i]},pedalPoint2D:function(t,e){var r=e[0],a=e[1],i=this.vecSub2D(a,r),s=this.vecSub2D(t,r),n=this.inner2D(i,s),o=n/this.inner2D(i,i);return this.vecAdd2D(r,this.vecMult2D(i,o))},_rayToBezier2:function(t,e,r,a,i){var s=i.x-a.x,n=i.y-a.y,o=t.x-2*e.x+r.x,l=2*(e.x-t.x),h=t.x,u=t.y-2*e.y+r.y,c=2*(e.y-t.y),p=t.y,y=this.solveEquationOrder2(o*n-s*u,l*n-s*c,n*h-n*a.x-s*p+s*a.y);return y},crossLineAndBezier:function(t,e,r,a,i){for(var s=this._rayToBezier2(t,e,r,a,i),n=(i.x-a.x,i.y-a.y,[]),o=0;o<s.length;o++)0<=s[o]&&s[o]<=1&&n.push({x:(r.x-2*e.x+t.x)*s[o]*s[o]+2*(e.x-t.x)*s[o]+t.x,y:(r.y-2*e.y+t.y)*s[o]*s[o]+2*(e.y-t.y)*s[o]+t.y});return n},aroundRectangle:function(t){var e=[],r=[];t.forEach(function(t){e.push(t.x),r.push(t.y)});var a={x:Math.min.apply(null,e),y:Math.min.apply(null,r)},i={x:Math.max.apply(null,e),y:Math.max.apply(null,r)};return{x:a.x,y:a.y,width:i.x-a.x,height:i.y-a.y}},centerOfAroundRectangle:function(t){var e=this.aroundRectangle(t);return{x:e.x+e.width/2,y:e.y+e.height/2}},isPointOnTriangle:function(t,e){var r=this.vecSub2D(t[1],t[0]),a=this.vecSub2D(t[2],t[1]),i=this.vecSub2D(t[0],t[2]),s=this.vecSub2D(e,t[0]),n=this.vecSub2D(e,t[1]),o=this.vecSub2D(e,t[2]),l=this.cross2D(r,n),h=this.cross2D(a,o),u=this.cross2D(i,s);return l>=0&&h>=0&&u>=0||0>=l&&0>=h&&0>=u?!0:!1},isPointOnArea:function(t,e){var r=0,a=[];for(r=0;r<t.length;r++){var i=t[r%t.length],s=t[(r+1)%t.length];(i.x>=e.x||s.x>=e.x)&&a.push([i,s])}var n=0;for(r=0;r<a.length;r++){var o=this.aroundRectangle(t),l=o.x+o.width;this.isCrossSegAndSeg([e,{x:l,y:e.y}],a[r])&&n++}return n%2===1},isPointOnBezierArea:function(t,e,r){var a=0,i=null,s=null,n=null,o=t.length,l=[],h=[];for(a=0;o>a;a++)s=t[a%o],n=t[(a+1)%o],e[(a+1)%o]?h.push([s,e[(a+1)%o],n]):l.push([s,n]);var u=0,c=this.aroundRectangle(t),p=10*(c.x+c.width),y={x:p,y:r.y};for(a=0;a<l.length;a++)this.isCrossSegAndSeg([r,y],l[a])&&u++;for(a=0;a<h.length;a++){i=h[a][0],s=h[a][1],n=h[a][2];for(var f=this.crossLineAndBezier(i,s,n,r,y),x=0;x<f.length;x++)f[x].x>=r.x&&u++}return u%2===1},isCrossSegAndSeg:function(t,e){return this._isCrossSegAndSeg(t[0].x,t[0].y,t[1].x,t[1].y,e[0].x,e[0].y,e[1].x,e[1].y)},_isCrossSegAndSeg:function(t,e,r,a,i,s,n,o){var l=(i-n)*(e-s)+(s-o)*(i-t),h=(i-n)*(a-s)+(s-o)*(i-r),u=(t-r)*(s-e)+(e-a)*(t-i),c=(t-r)*(o-e)+(e-a)*(t-n);return 0>u*c&&0>l*h},isCrossLineAndSeg:function(t,e){var r=this.cross2D(t[0],this.vecSub2D(e[0],t[1])),a=this.cross2D(t[0],this.vecSub2D(e[1],t[1]));return 0>r*a?!0:!1},isParallel:function(t,e){t=Array.isArray(t)?this.vecSub2D(t[1],t[0]):t,e=Array.isArray(e)?this.vecSub2D(e[1],e[0]):e;var r=this.cross2D(t,e);return Math.abs(r)<this.MINVALUE?!0:!1},crossPolygonAndLine:function(t,e){for(var r=[],a=t.length,i=0;a>i;i++){var s=[t[i],t[(i+1)%a]],n=this.crossSegAndLine(s,e);null!==n&&r.push(n)}return r},isOnLine:function(t,e){var r=this.pedalPoint2D(t,e);return this.isSame2D(t,r)},crossSegAndLine:function(t,e){if(this.isParallel(t,e))return null;if(this.isOnLine(t[0],e))return this.pointCopy2D(t[0]);if(this.isOnLine(t[1],e))return this.pointCopy2D(t[1]);var r=((e[1].x-e[0].x)*(t[0].y-e[0].y)-(e[1].y-e[0].y)*(t[0].x-e[0].x))/2,a=((e[1].x-e[0].x)*(e[0].y-t[1].y)-(e[1].y-e[0].y)*(e[0].x-t[1].x))/2,i=r/(r+a);if(i>0&&1>i){var s={x:t[0].x+(t[1].x-t[0].x)*i,y:t[0].y+(t[1].y-t[0].y)*i};return s}return null},splitPolyByLine:function(t,e){var r=this,a=[],i=[],s=[],n=0,o=t.length;for(n=0;o>n;n++){var l=[t[n%o],t[(n+1)%o]],h=this.crossSegAndLine(l,e);a.push(t[n%o]),null!==h&&(a.push(h),i.push(n+1+i.length),s.push(h))}if(s.length%2!==0)return[];var u=this.radian2D(e[0],e[1]);s.sort(function(t,e){return t=r.rotate2D(t,-u),e=r.rotate2D(e,-u),t.x-e.x});for(var c=[],p=0;p<s.length-1;){for(var y=[s[p],s[p+1]],f=!1,x=0;x<t.length;x++)if(this.isSameSeg2D(y,[t[x],t[(x+1)%t.length]])){f=!0;break}if(!f){c=y;break}p+=2}if(2!==c.length)return[];var v=s.concat(),g=v.indexOf(c[0]);-1!==g&&v.splice(g,1),g=v.indexOf(c[1]),-1!==g&&v.splice(g,1);var d=a.concat();v.forEach(function(t){var e=d.indexOf(t);d.splice(e,1)}),a=d,s=c;var D=a.indexOf(s[0]),m=a.indexOf(s[1]);if(-1===D||-1===m)return[];i=[],i[0]=Math.min(D,m),i[1]=Math.max(D,m);var S=[];if(2==i.length){var b=[];for(n=0;n<=i[0];n++)b.push({x:a[n].x,y:a[n].y});for(n=i[1];n<a.length;n++)b.push({x:a[n].x,y:a[n].y});for(S.push(b),b=[],n=i[0];n<=i[1];n++)b.push({x:a[n].x,y:a[n].y});S.push(b),b=[]}return S},omitSamePoint:function(t){for(var e=t.concat(),r=t.length,a=0;r>a;a++){var i=e[a],s=e[(a+1)%r];if(this.isSame2D(i,s)){e.splice(a,1),e=this.omitSamePoint(e);break}}return e},triangleSplit:function(t){var e=this;t=this.convertLoopwise(t);for(var r=t.concat(),a=0,i=0,s=[];r.length>=3;){var n=r.concat();n.sort(function(t,r){return e.length2D(r)-e.length2D(t)}),a=r.indexOf(n[0]);var o=this._getTriangle(r,a);if(o)r.splice(a,1);else{var l=r.length,h=this.vecSub2D(r[(a+1)%l],r[a]),u=this.vecSub2D(r[0>a-1?l-1:a-1],r[a]);i=this.cross2D(h,u);for(var c=a;!o;){c=(c+1)%l;var p=this.vecSub2D(r[(c+1)%l],r[c]),y=this.vecSub2D(r[0>c-1?l-1:c-1],r[c]),f=this.cross2D(p,y);f*i>0&&(o=this._getTriangle(r,c))}r.splice(c,1)}s.push(o)}return s},_getTriangle:function(t,e){var r=t.length,a=t[e],i=t[(e+1)%r],s=t[0>e-1?r-1:e-1],n=[a,i,s];return t.some(function(t){return t!==a&&t!==i&&t!==s&&this.isPointOnTriangle(n,t)?(n=null,!0):void 0},this),n},area:function(t,e){var r=0;if(t.length>2){for(var a=t.length,i=0;a-1>i;i++)r+=(t[i].x-t[i+1].x)*(t[i].y+t[i+1].y);r+=(t[a-1].x-t[0].x)*(t[a-1].y+t[0].y),r/=2,e||(r=Math.abs(r))}return r},loopwise:function(t){var e=this.area(t,!0);return e>0?1:0>e?-1:0},convertLoopwise:function(t){var e=t.concat();return-1===this.loopwise(t)&&e.reverse(),e},gravity2D:function(t){var e={x:0,y:0};return t.forEach(function(t){e.x+=t.x,e.y+=t.y}),e.x/=t.length,e.y/=t.length,e},isSameSeg2D:function(t,e){return this.isSame2D(t[0],e[0])&&this.isSame2D(t[1],e[1])||this.isSame2D(t[1],e[0])&&this.isSame2D(t[0],e[1])?!0:!1},approximateBezier:function(t,e){var r,a,i,s,n,o,l,h,u=[];if(3===t.length)for(i=1/e,r=0;e>=r;r++)s=i*r,n=this.vecMult2D(t[0],(1-s)*(1-s)),o=this.vecMult2D(t[1],2*s*(1-s)),l=this.vecMult2D(t[2],2*s*s),a={x:n.x+o.x+l.x,y:n.y+o.y+l.y},u.push(a);else if(4===t.length)for(i=1/e,r=0;e>=r;r++)s=i*r,n=this.vecMult2D(t[0],(1-s)*(1-s)*(1-s)),o=this.vecMult2D(t[1],3*s*(1-s)*(1-s)),l=this.vecMult2D(t[2],3*s*s*(1-s)),h=this.vecMult2D(t[3],s*s*s),a={x:n.x+o.x+l.x+h.x,y:n.y+o.y+l.y+h.y},u.push(a);return u},approximateArc:function(t,e,r,a,i,s,n){var o=[],l=0,h=null,u=0,c=a-r,p=c/n;for(l=0;n>=l;l++)u=p*l+r-s,h={x:t*Math.cos(u),y:e*Math.sin(u)},o.push(h);return o.forEach(function(t){var e=this.rotate2D(t,s);t.x=e.x,t.y=e.y},this),o.forEach(function(t){t.x+=i.x,t.y+=i.y},this),o},approximateArcWithPoint:function(e,r,a,i,s,n,o,l){var h=t.getEllipseCenter(a,i,e,r,o),u=null;u=s&&n||!s&&!n?this.loopwise([a,i,h[0]])<0?h[0]:h[1]:this.loopwise([a,i,h[0]])>0?h[0]:h[1];var c=0,p=0,y=t.getRadianOnArc(a,e,r,u,o),f=t.getRadianOnArc(i,e,r,u,o);return n?y>f?(c=y-2*Math.PI,p=f):(c=y,p=f):y>f?(c=y,p=f):(c=y,p=f-2*Math.PI),pList=t.approximateArc(e,r,c,p,u,o,l),pList},getRadianOnArc:function(t,e,r,a,i){t=this.rotate2D(t,-i,a);var s=Math.acos((t.x-a.x)/e);return t.y-a.y<0&&(s=-s+2*Math.PI),s+=i,s%=2*Math.PI},getEllipseCenter:function(t,e,r,a,i){t=this.rotate2D(t,-i),e=this.rotate2D(e,-i);var s={x:t.x/r,y:t.y/a},n={x:e.x/r,y:e.y/a},o=this.getCircleCenter(s,n,1),l={x:o[0].x*r,y:o[0].y*a},h={x:o[1].x*r,y:o[1].y*a};return l=this.rotate2D(l,i),h=this.rotate2D(h,i),[l,h]},getCircleCenter:function(t,e,r){var a=(t.x+e.x)/2,i=(t.x-e.x)/2,s=(t.y+e.y)/2,n=(t.y-e.y)/2,o=Math.sqrt(i*i+n*n),l=Math.sqrt(Math.pow(r/o,2)-1),h={x:a+n*l,y:s-i*l},u={x:a-n*l,y:s+i*l};return[h,u]},transform2D:function(t,e){var r=[],a=e[0],i=e[1],s=e[2],n=e[3],o=e[4],l=e[5];return t.forEach(function(t){var e={x:a*t.x+s*t.y+o,y:i*t.x+n*t.y+l};r.push(e)},this),r}};return t}.call(e,r,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,r){var a;a=function(t){var e=function(t){this.src=t,this.audio=new Audio,this.audio.src=t,this.audio.load(),this.audio.volume=.3};return e.prototype.play=function(){var t=this.audio;"undefined"!=typeof t.currentTime&&(t.currentTime=0),t.play()},e}.call(e,r,e,t),!(void 0!==a&&(t.exports=a))},function(t,e,r){var a;a=function(t){var e=r(2),a={BEZIER_SPLIT_COUNT:10,ELLIPSE_SPLIT_COUNT:20,loadSvgGraphicsPath:function(t){var e=new DOMParser,r=null;try{r=e.parseFromString(t,"image/svg+xml")}catch(a){throw console.log("This svg resouce is invalid to parse."),a}var i=this.parseSvgGraphics(r);return i},parseSvgGraphics:function(t){var e=[],r=0,a=t.getElementsByTagName("path");for(r=0;r<a.length;r++)e.push({tag:"path",pointList:this.parsePath(a[r]),style:this.parseTagStyle(a[r]),close:a[r].attributes.d.value.match(/Z|z/)});var i=t.getElementsByTagName("rect");for(r=0;r<i.length;r++)e.push({tag:"rect",pointList:this.parseRect(i[r]),style:this.parseTagStyle(i[r]),close:!0});var s=t.getElementsByTagName("ellipse");for(r=0;r<s.length;r++)e.push({tag:"ellipse",pointList:this.parseEllipse(s[r]),style:this.parseTagStyle(s[r]),close:!0});var n=t.getElementsByTagName("circle");for(r=0;r<n.length;r++)e.push({tag:"circle",pointList:this.parseCircle(n[r]),style:this.parseTagStyle(n[r]),close:!0});return e},adoptTransform:function(t,r){var a=[];if(r.forEach(function(t){a.push(e.pointCopy2D(t))},this),!t.attributes.transform)return a;var i=t.attributes.transform.value.split(/\)/);return i.forEach(function(t){var r=t.split(/\(/);if(2===r.length){var i=r[0],s=[];switch(r[1].split(/,/).forEach(function(t){s.push(parseFloat(t,10))}),i.trim().toLowerCase()){case"matrix":a=e.transform2D(a,s);break;case"translate":a.forEach(function(t){t.x+=s[0],t.y+=s[1]},this);break;case"scale":var n=s[0],o=s[0];s.length>1&&(o=s[1]),a.forEach(function(t){t.x*=n,t.y*=o},this);break;case"rotate":var l=null;s.length>2&&(l={x:s[1],y:s[2]}),a.forEach(function(t){var r=e.rotate2D(t,s[0]*Math.PI/180,l);t.x=r.x,t.y=r.y},this);break;case"skewx":a.forEach(function(t){t.x+=Math.tan(s[0])*t.y},this);break;case"skewy":a.forEach(function(t){t.y+=Math.tan(s[0])*t.x},this)}}},this),a},parseCircle:function(t){var r=[],a=parseFloat(t.attributes.cx.value,10),i=parseFloat(t.attributes.cy.value,10),s=parseFloat(t.attributes.r.value,10);return r=e.approximateArc(s,s,0,2*Math.PI,{x:a,y:i},0,this.ELLIPSE_SPLIT_COUNT),r=this.adoptTransform(t,r)},parseEllipse:function(t){var r=[],a=parseFloat(t.attributes.cx.value,10),i=parseFloat(t.attributes.cy.value,10),s=parseFloat(t.attributes.rx.value,10),n=parseFloat(t.attributes.ry.value,10);return r=e.approximateArc(s,n,0,2*Math.PI,{x:a,y:i},0,this.ELLIPSE_SPLIT_COUNT),r=this.adoptTransform(t,r)},parseRect:function(t){var e=[],r=parseFloat(t.attributes.x.value,10),a=parseFloat(t.attributes.y.value,10),i=parseFloat(t.attributes.width.value,10),s=parseFloat(t.attributes.height.value,10);return e.push({x:r,y:a}),e.push({x:r+i,y:a}),e.push({x:r+i,y:a+s}),e.push({x:r,y:a+s}),e=this.adoptTransform(t,e)},parsePath:function(t){for(var r=[],a=this.splitD(t.attributes.d.value),i={x:0,y:0},s={x:0,y:0},n=0;n<a.length;n++){var o=a[n],l=[],h=null,u=null,c=null,p=null;switch(o[0]){case"M":case"L":case"H":l.push({x:parseFloat(o[1],10),y:parseFloat(o[2],10)});break;case"m":case"l":case"h":l.push({x:i.x+parseFloat(o[1],10),y:i.y+parseFloat(o[2],10)});break;case"V":l.push({x:i.x,y:parseFloat(o[1],10)});break;case"v":l.push({x:i.x,y:i.y+parseFloat(o[1],10)});break;case"Q":h=i,u={x:parseFloat(o[1],10),y:parseFloat(o[2],10)},c={x:parseFloat(o[3],10),y:parseFloat(o[4],10)},l=e.approximateBezier([h,u,c],this.BEZIER_SPLIT_COUNT),l.shift();break;case"q":h=i,u={x:h.x+parseFloat(o[1],10),y:h.y+parseFloat(o[2],10)},c={x:h.x+parseFloat(o[3],10),y:h.y+parseFloat(o[4],10)},l=e.approximateBezier([h,u,c],this.BEZIER_SPLIT_COUNT),l.shift();break;case"T":h=i,u=e.symmetryPoint2D(h,s),c={x:parseFloat(o[1],10),y:parseFloat(o[2],10)},l=e.approximateBezier([h,u,c],this.BEZIER_SPLIT_COUNT),l.shift();break;case"t":h=i,u=e.symmetryPoint2D(h,s),c={x:h.x+parseFloat(o[1],10),y:h.y+parseFloat(o[2],10)},l=e.approximateBezier([h,u,c],this.BEZIER_SPLIT_COUNT),l.shift();break;case"C":h=i,u={x:parseFloat(o[1],10),y:parseFloat(o[2],10)},c={x:parseFloat(o[3],10),y:parseFloat(o[4],10)},p={x:parseFloat(o[5],10),y:parseFloat(o[6],10)},l=e.approximateBezier([h,u,c,p],this.BEZIER_SPLIT_COUNT),l.shift();break;case"c":h=i,u={x:h.x+parseFloat(o[1],10),y:h.y+parseFloat(o[2],10)},c={x:h.x+parseFloat(o[3],10),y:h.y+parseFloat(o[4],10)},p={x:h.x+parseFloat(o[5],10),y:h.y+parseFloat(o[6],10)},l=e.approximateBezier([h,u,c,p],this.BEZIER_SPLIT_COUNT),l.shift();break;case"S":h=i,u=e.symmetryPoint2D(h,s),c={x:parseFloat(o[1],10),y:parseFloat(o[2],10)},p={x:parseFloat(o[3],10),y:parseFloat(o[4],10)},l=e.approximateBezier([h,u,c,p],this.BEZIER_SPLIT_COUNT),l.shift();break;case"s":h=i,u=e.symmetryPoint2D(h,s),c={x:h.x+parseFloat(o[1],10),y:h.y+parseFloat(o[2],10)},p={x:h.x+parseFloat(o[3],10),y:h.y+parseFloat(o[4],10)},l=e.approximateBezier([h,u,c,p],this.BEZIER_SPLIT_COUNT),l.shift();break;case"A":h=i,u={x:parseFloat(o[6],10),y:parseFloat(o[7],10)},l=e.approximateArcWithPoint(parseFloat(o[1],10),parseFloat(o[2],10),h,u,parseInt(o[4],10),parseInt(o[5],10),parseFloat(o[3],10)/180*Math.PI,this.BEZIER_SPLIT_COUNT),l.shift();break;case"a":h=i,u={x:h.x+parseFloat(o[6],10),y:h.y+parseFloat(o[7],10)},l=e.approximateArcWithPoint(parseFloat(o[1],10),parseFloat(o[2],10),h,u,parseInt(o[4],10),parseInt(o[5],10),parseFloat(o[3],10)/180*Math.PI,this.BEZIER_SPLIT_COUNT),l.shift();break;default:continue}l.length>0&&(i=l[l.length-1],r=r.concat(l),l.length>1&&(s=l[l.length-2]))}return r=this.adoptTransform(t,r)},splitD:function(t){var e=[],r=/M|m|L|l|H|h|V|v|C|c|S|s|Q|q|T|t|A|a|Z|z/,a=t.trim().split(/,| /);a=a.filter(function(t){return""!==t});for(var i="M",s=0;s<a.length;){var n=[];a[s].match(r)?(n[0]=a[s].trim(),i=n[0],s++):n[0]=i,n[0].match(/Z|z/)||(n[0].match(/V|v|H|h/)?(n=n.concat(a.slice(s,s+2)),s+=2):n[0].match(/M|m|L|l|T|t/)?(n=n.concat(a.slice(s,s+2)),s+=2):n[0].match(/Q|q|S|s/)?(n=n.concat(a.slice(s,s+4)),s+=4):n[0].match(/C|c/)?(n=n.concat(a.slice(s,s+6)),s+=6):n[0].match(/A|a/)&&(n=n.concat(a.slice(s,s+7)),s+=7)),e.push(n)}return e},parseTagStyle:function(t){var e={},r=[];if(t.attributes.style){var a=t.attributes.style.value;a.split(";").forEach(function(t){var e=t.split(":"),a=e[0],i=e[1];r[a]=i},this)}else for(var i=0;i<t.attributes.length;i++)r[t.attributes[i].name]=t.attributes[i].value;for(var s in r){var n=r[s];if("fill"===s.toLowerCase())"none"===n.toLowerCase()?(e.fillStyle=0,e.fill=!1):(e.fillStyle=n,e.fill=!0);else if("stroke"===s.toLowerCase())"none"===n.toLowerCase()?(e.strokeStyle=0,e.stroke=!1):(e.strokeStyle=n,e.stroke=!0);else if("stroke-width"===s.toLowerCase())e.lineWidth=parseFloat(n,10);else if("stroke-opacity"===s.toLowerCase())e.strokeGlobalAlpha=parseFloat(n,10);else if("fill-opacity"===s.toLowerCase())e.fillGlobalAlpha=parseFloat(n,10);else if("stroke-linecap"===s.toLowerCase())e.lineCap=n;else if("stroke-linejoin"===s.toLowerCase())e.lineJoin=n;else if("stroke-dasharray"===s.toLowerCase())if("none"===n.toLowerCase())e.lineDash=[];else{var o=n.split(",");e.lineDash=[],o.forEach(function(t){e.lineDash.push(parseFloat(t,10))})}}return e},serializeSvgString:function(t){var e=this.serializeSvg(t),r=new XMLSerializer,a=r.serializeToString(e);return a},serializeSvg:function(t){var e=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=100,a=100;return t.forEach(function(t){var i=this.serializePath(t.pointList,t.style);e.appendChild(i),t.pointList.forEach(function(t){r=Math.max(r,t.x),a=Math.max(a,t.y)},this)},this),r*=1.1,a*=1.1,e.setAttribute("width",r),e.setAttribute("height",a),e},serializePath:function(t,e){var r=document.createElementNS("http://www.w3.org/2000/svg","path"),a=this.serializePointList(t);r.setAttribute("d",a);var e=this.serializeStyle(e);return r.setAttribute("style",e),r},serializePointList:function(t){var e="";return t.forEach(function(r,a){0===a?e+="M "+r.x+","+r.y:(e+=" L "+r.x+","+r.y,a===t.length-1&&(e+=" Z"))},this),e},serializeStyle:function(t){var e="";return e+=t.fill?"fill:"+t.fillStyle+";":"fill:none;",t.fillGlobalAlpha&&(e+="fill-opacity:"+t.fillGlobalAlpha+";"),e+=t.stroke?"stroke:"+t.strokeStyle+";":"stroke:none;",t.lineWidth&&(e+="stroke-width:"+t.lineWidth+";"),t.strokeGlobalAlpha&&(e+="stroke-opacity:"+t.strokeGlobalAlpha+";"),t.lineCap&&(e+="stroke-linecap:"+t.lineCap+";"),t.lineJoin&&(e+="stroke-linejoin:"+t.lineJoin+";"),t.lineDash&&(e+=t.lineDash.length>0?"stroke-dasharray:"+t.lineDash.join(",")+";":"stroke-dasharray:none;"),e}};return a}.call(e,r,e,t),!(void 0!==a&&(t.exports=a))}])});